(("undefined"!=typeof globalThis?globalThis:self).makoChunk_global=("undefined"!=typeof globalThis?globalThis:self).makoChunk_global||[]).push([["src/pages/links/index.tsx"],{"src/pages/links/index.tsx":function(e,t,r){r.d(t,"__esModule",{value:!0}),r.e(t,{default:function(){return eR;}});var a=r("@swc/helpers/_/_interop_require_default"),s=r("@swc/helpers/_/_interop_require_wildcard"),l=r("node_modules/@umijs/preset-umi/node_modules/react/jsx-runtime.js"),i=r("node_modules/@umijs/preset-umi/node_modules/react/index.js"),n=a._(i),u=r("src/components/title.tsx"),d=a._(u),o=e=>"checkbox"===e.type,f=e=>e instanceof Date,c=e=>null==e;let m=e=>"object"==typeof e;var y=e=>!c(e)&&!Array.isArray(e)&&m(e)&&!f(e),h=e=>y(e)&&e.target?o(e.target)?e.target.checked:e.target.value:e,g=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,p=(e,t)=>e.has(g(t)),v=e=>{let t=e.constructor&&e.constructor.prototype;return y(t)&&t.hasOwnProperty("isPrototypeOf");},b="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function _(e){let t;let r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(!(b&&(e instanceof Blob||e instanceof FileList))&&(r||y(e))))return e;else if(t=r?[]:{},r||v(e))for(let r in e)e.hasOwnProperty(r)&&(t[r]=_(e[r]));else t=e;return t;}var x=e=>Array.isArray(e)?e.filter(Boolean):[],V=e=>void 0===e,j=(e,t,r)=>{if(!t||!y(e))return r;let a=x(t.split(/[,[\].]+?/)).reduce((e,t)=>c(e)?e:e[t],e);return V(a)||a===e?V(e[t])?r:e[t]:a;},w=e=>"boolean"==typeof e,A=e=>/^\w*$/.test(e),F=e=>x(e.replace(/["|']|\]/g,"").split(/\.|\[/)),S=(e,t,r)=>{let a=-1,s=A(t)?[t]:F(t),l=s.length,i=l-1;for(;++a<l;){let t=s[a],l=r;if(a!==i){let r=e[t];l=y(r)||Array.isArray(r)?r:isNaN(+s[a+1])?{}:[];}if("__proto__"===t)return;e[t]=l,e=e[t];}return e;};let k={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},D={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},N={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},C=n.default.createContext(null),E=()=>n.default.useContext(C);var O=(e,t,r,a=!0)=>{let s={defaultValues:t._defaultValues};for(let l in e)Object.defineProperty(s,l,{get:()=>(t._proxyFormState[l]!==D.all&&(t._proxyFormState[l]=!a||D.all),r&&(r[l]=!0),e[l])});return s;},L=e=>y(e)&&!Object.keys(e).length,U=(e,t,r,a)=>{r(e);let{name:s,...l}=e;return L(l)||Object.keys(l).length>=Object.keys(t).length||Object.keys(l).find(e=>t[e]===(!a||D.all));},T=e=>Array.isArray(e)?e:[e],q=(e,t,r)=>!e||!t||e===t||T(e).some(e=>e&&(r?e===t:e.startsWith(t)||t.startsWith(e)));function B(e){let t=n.default.useRef(e);t.current=e,n.default.useEffect(()=>{let r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe();};},[e.disabled]);}var R=e=>"string"==typeof e,M=(e,t,r,a,s)=>R(e)?(a&&t.watch.add(e),j(r,e,s)):Array.isArray(e)?e.map(e=>(a&&t.watch.add(e),j(r,e))):(a&&(t.watchAll=!0),r);let $=e=>e.render(function(e){let t=E(),{name:r,disabled:a,control:s=t.control,shouldUnregister:l}=e,i=p(s._names.array,r),u=function(e){let t=E(),{control:r=t.control,name:a,defaultValue:s,disabled:l,exact:i}=e||{},u=n.default.useRef(a);u.current=a,B({disabled:l,subject:r._subjects.values,next:e=>{q(u.current,e.name,i)&&o(_(M(u.current,r._names,e.values||r._formValues,!1,s)));}});let[d,o]=n.default.useState(r._getWatch(a,s));return n.default.useEffect(()=>r._removeUnmounted()),d;}({control:s,name:r,defaultValue:j(s._formValues,r,j(s._defaultValues,r,e.defaultValue)),exact:!0}),d=function(e){let t=E(),{control:r=t.control,disabled:a,name:s,exact:l}=e||{},[i,u]=n.default.useState(r._formState),d=n.default.useRef(!0),o=n.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),f=n.default.useRef(s);return f.current=s,B({disabled:a,next:e=>d.current&&q(f.current,e.name,l)&&U(e,o.current,r._updateFormState)&&u({...r._formState,...e}),subject:r._subjects.state}),n.default.useEffect(()=>(d.current=!0,o.current.isValid&&r._updateValid(!0),()=>{d.current=!1;}),[r]),O(i,r,o.current,!1);}({control:s,name:r}),o=n.default.useRef(s.register(r,{...e.rules,value:u,...w(e.disabled)?{disabled:e.disabled}:{}}));return n.default.useEffect(()=>{let e=s._options.shouldUnregister||l,t=(e,t)=>{let r=j(s._fields,e);r&&r._f&&(r._f.mount=t);};if(t(r,!0),e){let e=_(j(s._options.defaultValues,r));S(s._defaultValues,r,e),V(j(s._formValues,r))&&S(s._formValues,r,e);}return()=>{(i?e&&!s._state.action:e)?s.unregister(r):t(r,!1);};},[r,s,i,l]),n.default.useEffect(()=>{j(s._fields,r)&&s._updateDisabledField({disabled:a,fields:s._fields,name:r,value:j(s._fields,r)._f.value});},[a,r,s]),{field:{name:r,value:u,...w(a)||d.disabled?{disabled:d.disabled||a}:{},onChange:n.default.useCallback(e=>o.current.onChange({target:{value:h(e),name:r},type:k.CHANGE}),[r]),onBlur:n.default.useCallback(()=>o.current.onBlur({target:{value:j(s._formValues,r),name:r},type:k.BLUR}),[r,s]),ref:e=>{let t=j(s._fields,r);t&&e&&(t._f.ref={focus:()=>e.focus(),select:()=>e.select(),setCustomValidity:t=>e.setCustomValidity(t),reportValidity:()=>e.reportValidity()});}},formState:d,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!j(d.errors,r)},isDirty:{enumerable:!0,get:()=>!!j(d.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!j(d.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!j(d.validatingFields,r)},error:{enumerable:!0,get:()=>j(d.errors,r)}})};}(e));var P=(e,t,r,a,s)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[a]:s||!0}}:{},H=e=>({isOnSubmit:!e||e===D.onSubmit,isOnBlur:e===D.onBlur,isOnChange:e===D.onChange,isOnAll:e===D.all,isOnTouch:e===D.onTouched}),I=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));let W=(e,t,r,a)=>{for(let s of r||Object.keys(e)){let r=j(e,s);if(r){let{_f:e,...l}=r;if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],s)&&!a||e.ref&&t(e.ref,e.name)&&!a)break;W(l,t);}else y(l)&&W(l,t);}}};var G=(e,t,r)=>{let a=T(j(e,r));return S(a,"root",t[r]),S(e,r,a),e;},z=e=>"file"===e.type,K=e=>"function"==typeof e,J=e=>{if(!b)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement);},Q=e=>R(e),X=e=>"radio"===e.type,Y=e=>e instanceof RegExp;let Z={value:!1,isValid:!1},ee={value:!0,isValid:!0};var et=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length};}return e[0].checked&&!e[0].disabled?e[0].attributes&&!V(e[0].attributes.value)?V(e[0].value)||""===e[0].value?ee:{value:e[0].value,isValid:!0}:ee:Z;}return Z;};let er={isValid:!1,value:null};var ea=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,er):er;function es(e,t,r="validate"){if(Q(e)||Array.isArray(e)&&e.every(Q)||w(e)&&!e)return{type:r,message:Q(e)?e:"",ref:t};}var el=e=>y(e)&&!Y(e)?e:{value:e,message:""},ei=async(e,t,r,a,s)=>{let{ref:l,refs:i,required:n,maxLength:u,minLength:d,min:f,max:m,pattern:h,validate:g,name:p,valueAsNumber:v,mount:b,disabled:_}=e._f,x=j(t,p);if(!b||_)return{};let A=i?i[0]:l,F=e=>{a&&A.reportValidity&&(A.setCustomValidity(w(e)?"":e||""),A.reportValidity());},S={},k=X(l),D=o(l),C=(v||z(l))&&V(l.value)&&V(x)||J(l)&&""===l.value||""===x||Array.isArray(x)&&!x.length,E=P.bind(null,p,r,S),O=(e,t,r,a=N.maxLength,s=N.minLength)=>{let i=e?t:r;S[p]={type:e?a:s,message:i,ref:l,...E(e?a:s,i)};};if(s?!Array.isArray(x)||!x.length:n&&(!(k||D)&&(C||c(x))||w(x)&&!x||D&&!et(i).isValid||k&&!ea(i).isValid)){let{value:e,message:t}=Q(n)?{value:!!n,message:n}:el(n);if(e&&(S[p]={type:N.required,message:t,ref:A,...E(N.required,t)},!r))return F(t),S;}if(!C&&(!c(f)||!c(m))){let e,t;let a=el(m),s=el(f);if(c(x)||isNaN(x)){let r=l.valueAsDate||new Date(x),i=e=>new Date(new Date().toDateString()+" "+e),n="time"==l.type,u="week"==l.type;R(a.value)&&x&&(e=n?i(x)>i(a.value):u?x>a.value:r>new Date(a.value)),R(s.value)&&x&&(t=n?i(x)<i(s.value):u?x<s.value:r<new Date(s.value));}else{let r=l.valueAsNumber||(x?+x:x);c(a.value)||(e=r>a.value),c(s.value)||(t=r<s.value);}if((e||t)&&(O(!!e,a.message,s.message,N.max,N.min),!r))return F(S[p].message),S;}if((u||d)&&!C&&(R(x)||s&&Array.isArray(x))){let e=el(u),t=el(d),a=!c(e.value)&&x.length>+e.value,s=!c(t.value)&&x.length<+t.value;if((a||s)&&(O(a,e.message,t.message),!r))return F(S[p].message),S;}if(h&&!C&&R(x)){let{value:e,message:t}=el(h);if(Y(e)&&!x.match(e)&&(S[p]={type:N.pattern,message:t,ref:l,...E(N.pattern,t)},!r))return F(t),S;}if(g){if(K(g)){let e=await g(x,t),a=es(e,A);if(a&&(S[p]={...a,...E(N.validate,a.message)},!r))return F(a.message),S;}else if(y(g)){let e={};for(let a in g){if(!L(e)&&!r)break;let s=es(await g[a](x,t),A,a);s&&(e={...s,...E(a,s.message)},F(s.message),r&&(S[p]=e));}if(!L(e)&&(S[p]={ref:A,...e},!r))return S;}}return F(!0),S;};function en(e,t){let r=Array.isArray(t)?t:A(t)?[t]:F(t),a=1===r.length?e:function(e,t){let r=t.slice(0,-1).length,a=0;for(;a<r;)e=V(e)?a++:e[t[a++]];return e;}(e,r),s=r.length-1,l=r[s];return a&&delete a[l],0!==s&&(y(a)&&L(a)||Array.isArray(a)&&function(e){for(let t in e)if(e.hasOwnProperty(t)&&!V(e[t]))return!1;return!0;}(a))&&en(e,r.slice(0,-1)),e;}var eu=()=>{let e=[];return{get observers(){return e;},next:t=>{for(let r of e)r.next&&r.next(t);},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t);}}),unsubscribe:()=>{e=[];}};},ed=e=>c(e)||!m(e);function eo(e,t){if(ed(e)||ed(t))return e===t;if(f(e)&&f(t))return e.getTime()===t.getTime();let r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(let s of r){let r=e[s];if(!a.includes(s))return!1;if("ref"!==s){let e=t[s];if(f(r)&&f(e)||y(r)&&y(e)||Array.isArray(r)&&Array.isArray(e)?!eo(r,e):r!==e)return!1;}}return!0;}var ef=e=>"select-multiple"===e.type,ec=e=>X(e)||o(e),em=e=>J(e)&&e.isConnected,ey=e=>{for(let t in e)if(K(e[t]))return!0;return!1;};function eh(e,t={}){let r=Array.isArray(e);if(y(e)||r)for(let r in e)Array.isArray(e[r])||y(e[r])&&!ey(e[r])?(t[r]=Array.isArray(e[r])?[]:{},eh(e[r],t[r])):c(e[r])||(t[r]=!0);return t;}var eg=(e,t)=>(function e(t,r,a){let s=Array.isArray(t);if(y(t)||s)for(let s in t)Array.isArray(t[s])||y(t[s])&&!ey(t[s])?V(r)||ed(a[s])?a[s]=Array.isArray(t[s])?eh(t[s],[]):{...eh(t[s])}:e(t[s],c(r)?{}:r[s],a[s]):a[s]=!eo(t[s],r[s]);return a;})(e,t,eh(t)),ep=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:a})=>V(e)?e:t?""===e?NaN:e?+e:e:r&&R(e)?new Date(e):a?a(e):e;function ev(e){let t=e.ref;if(e.refs?!e.refs.every(e=>e.disabled):!t.disabled)return z(t)?t.files:X(t)?ea(e.refs).value:ef(t)?[...t.selectedOptions].map(({value:e})=>e):o(t)?et(e.refs).value:ep(V(t.value)?e.ref.value:t.value,e);}var eb=(e,t,r,a)=>{let s={};for(let r of e){let e=j(t,r);e&&S(s,r,e._f);}return{criteriaMode:r,names:[...e],fields:s,shouldUseNativeValidation:a};},e_=e=>V(e)?e:Y(e)?e.source:y(e)?Y(e.value)?e.value.source:e.value:e,ex=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function eV(e,t,r){let a=j(e,r);if(a||A(r))return{error:a,name:r};let s=r.split(".");for(;s.length;){let a=s.join("."),l=j(t,a),i=j(e,a);if(l&&!Array.isArray(l)&&r!==a)break;if(i&&i.type)return{name:a,error:i};s.pop();}return{name:r};}var ej=(e,t,r,a,s)=>!s.isOnAll&&(!r&&s.isOnTouch?!(t||e):(r?a.isOnBlur:s.isOnBlur)?!e:(r?!a.isOnChange:!s.isOnChange)||e),ew=(e,t)=>!x(j(e,t)).length&&en(e,t);let eA={mode:D.onSubmit,reValidateMode:D.onChange,shouldFocusError:!0};var eF=r("node_modules/zustand/esm/index.mjs"),eS=r("src/tools/api.ts"),ek=s._(eS);async function eD(){let e=await ek.default.get(ek.friendApi);return e.data;}async function eN(e){let t=await ek.default.post(ek.friendAddApi,e);return t.data;}let eC=(0,eF.create)(e=>({data:[],fetchAll:()=>{eD().then(({data:t})=>{e(e=>({...e,data:t}));});},add:async e=>{await eN(e);}}));eC.getState().fetchAll();var eE=r("node_modules/zustand/esm/react/shallow.mjs"),eO=r("src/tools/fun.ts");function eL(e){return(0,l.jsx)(l.Fragment,{children:e&&(0,l.jsx)("div",{className:"label",children:(0,l.jsx)("div",{className:"label-text-alt",children:e})})});}function eU(e){return e?"input-error":"";}let eT=({link:e})=>(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"card shadow bg-base-100",children:[(0,l.jsx)("figure",{className:"aspect-[1/1] ",children:(0,l.jsx)("img",{alt:e.name,src:e.logo,className:"aspect-[1/1] object-cover"})}),(0,l.jsxs)("div",{className:"card-body",children:[(0,l.jsx)("h2",{className:"card-title",children:(0,l.jsx)("a",{href:e.url,target:"_blank",rel:"noreferrer",className:"link",children:e.name})}),(0,l.jsx)("p",{children:e.intro}),(0,l.jsx)("div",{className:"card-actions justify-end"})]})]})});var eq=r("src/components/text.tsx"),eB=a._(eq);function eR(){let[e,t]=n.default.useState(!1),[r,a]=n.default.useState(!1),{register:s,handleSubmit:i,control:u,formState:{errors:m,disabled:g},reset:v}=function(e={}){let t=n.default.useRef(),r=n.default.useRef(),[a,s]=n.default.useState({isDirty:!1,isValidating:!1,isLoading:K(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:K(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...function(e={}){let t,r={...eA,...e},a={submitCount:0,isDirty:!1,isLoading:K(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:r.errors||{},disabled:r.disabled||!1},s={},l=(y(r.defaultValues)||y(r.values))&&_(r.defaultValues||r.values)||{},i=r.shouldUnregister?{}:_(l),n={action:!1,mount:!1,watch:!1},u={mount:new Set,unMount:new Set,array:new Set,watch:new Set},d=0,m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},g={values:eu(),array:eu(),state:eu()},v=H(r.mode),A=H(r.reValidateMode),F=r.criteriaMode===D.all,N=e=>t=>{clearTimeout(d),d=setTimeout(e,t);},C=async e=>{if(m.isValid||e){let e=r.resolver?L((await $()).errors):await Q(s,!0);e!==a.isValid&&g.state.next({isValid:e});}},E=(e,t)=>{(m.isValidating||m.validatingFields)&&((e||Array.from(u.mount)).forEach(e=>{e&&(t?S(a.validatingFields,e,t):en(a.validatingFields,e));}),g.state.next({validatingFields:a.validatingFields,isValidating:!L(a.validatingFields)}));},O=(e,t)=>{S(a.errors,e,t),g.state.next({errors:a.errors});},U=(e,t,r,a)=>{let u=j(s,e);if(u){let s=j(i,e,V(r)?j(l,e):r);V(s)||a&&a.defaultChecked||t?S(i,e,t?s:ev(u._f)):Z(e,s),n.mount&&C();}},q=(e,t,r,i,n)=>{let u=!1,d=!1,o={name:e},f=!!(j(s,e)&&j(s,e)._f&&j(s,e)._f.disabled);if(!r||i){m.isDirty&&(d=a.isDirty,a.isDirty=o.isDirty=X(),u=d!==o.isDirty);let r=f||eo(j(l,e),t);d=!!(!f&&j(a.dirtyFields,e)),r||f?en(a.dirtyFields,e):S(a.dirtyFields,e,!0),o.dirtyFields=a.dirtyFields,u=u||m.dirtyFields&&!r!==d;}if(r){let t=j(a.touchedFields,e);t||(S(a.touchedFields,e,r),o.touchedFields=a.touchedFields,u=u||m.touchedFields&&t!==r);}return u&&n&&g.state.next(o),u?o:{};},B=(r,s,l,i)=>{let n=j(a.errors,r),u=m.isValid&&w(s)&&a.isValid!==s;if(e.delayError&&l?(t=N(()=>O(r,l)))(e.delayError):(clearTimeout(d),t=null,l?S(a.errors,r,l):en(a.errors,r)),(l?!eo(n,l):n)||!L(i)||u){let e={...i,...u&&w(s)?{isValid:s}:{},errors:a.errors,name:r};a={...a,...e},g.state.next(e);}},$=async e=>{E(e,!0);let t=await r.resolver(i,r.context,eb(e||u.mount,s,r.criteriaMode,r.shouldUseNativeValidation));return E(e),t;},P=async e=>{let{errors:t}=await $(e);if(e)for(let r of e){let e=j(t,r);e?S(a.errors,r,e):en(a.errors,r);}else a.errors=t;return t;},Q=async(e,t,s={valid:!0})=>{for(let l in e){let n=e[l];if(n){let{_f:e,...d}=n;if(e){let d=u.array.has(e.name);E([l],!0);let o=await ei(n,i,F,r.shouldUseNativeValidation&&!t,d);if(E([l]),o[e.name]&&(s.valid=!1,t))break;t||(j(o,e.name)?d?G(a.errors,o,e.name):S(a.errors,e.name,o[e.name]):en(a.errors,e.name));}d&&await Q(d,t,s);}}return s.valid;},X=(e,t)=>(e&&t&&S(i,e,t),!eo(el(),l)),Y=(e,t,r)=>M(e,u,{...n.mount?i:V(t)?l:R(e)?{[e]:t}:t},r,t),Z=(e,t,r={})=>{let a=j(s,e),l=t;if(a){let r=a._f;r&&(r.disabled||S(i,e,ep(t,r)),l=J(r.ref)&&c(t)?"":t,ef(r.ref)?[...r.ref.options].forEach(e=>e.selected=l.includes(e.value)):r.refs?o(r.ref)?r.refs.length>1?r.refs.forEach(e=>(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(l)?!!l.find(t=>t===e.value):l===e.value)):r.refs[0]&&(r.refs[0].checked=!!l):r.refs.forEach(e=>e.checked=e.value===l):z(r.ref)?r.ref.value="":(r.ref.value=l,r.ref.type||g.values.next({name:e,values:{...i}})));}(r.shouldDirty||r.shouldTouch)&&q(e,l,r.shouldTouch,r.shouldDirty,!0),r.shouldValidate&&es(e);},ee=(e,t,r)=>{for(let a in t){let l=t[a],i=`${e}.${a}`,n=j(s,i);!u.array.has(e)&&ed(l)&&(!n||n._f)||f(l)?Z(i,l,r):ee(i,l,r);}},et=(e,t,r={})=>{let d=j(s,e),o=u.array.has(e),f=_(t);S(i,e,f),o?(g.array.next({name:e,values:{...i}}),(m.isDirty||m.dirtyFields)&&r.shouldDirty&&g.state.next({name:e,dirtyFields:eg(l,i),isDirty:X(e,f)})):!d||d._f||c(f)?Z(e,f,r):ee(e,f,r),I(e,u)&&g.state.next({...a}),g.values.next({name:n.mount?e:void 0,values:{...i}});},er=async e=>{n.mount=!0;let l=e.target,d=l.name,o=!0,f=j(s,d),c=e=>{o=Number.isNaN(e)||e===j(i,d,e);};if(f){let n,y;let p=l.type?ev(f._f):h(e),b=e.type===k.BLUR||e.type===k.FOCUS_OUT,_=!ex(f._f)&&!r.resolver&&!j(a.errors,d)&&!f._f.deps||ej(b,j(a.touchedFields,d),a.isSubmitted,A,v),x=I(d,u,b);S(i,d,p),b?(f._f.onBlur&&f._f.onBlur(e),t&&t(0)):f._f.onChange&&f._f.onChange(e);let V=q(d,p,b,!1),w=!L(V)||x;if(b||g.values.next({name:d,type:e.type,values:{...i}}),_)return m.isValid&&C(),w&&g.state.next({name:d,...x?{}:V});if(!b&&x&&g.state.next({...a}),r.resolver){let{errors:e}=await $([d]);if(c(p),o){let t=eV(a.errors,s,d),r=eV(e,s,t.name||d);n=r.error,d=r.name,y=L(e);}}else E([d],!0),n=(await ei(f,i,F,r.shouldUseNativeValidation))[d],E([d]),c(p),o&&(n?y=!1:m.isValid&&(y=await Q(s,!0)));o&&(f._f.deps&&es(f._f.deps),B(d,y,n,V));}},ea=(e,t)=>{if(j(a.errors,t)&&e.focus)return e.focus(),1;},es=async(e,t={})=>{let l,i;let n=T(e);if(r.resolver){let t=await P(V(e)?e:n);l=L(t),i=e?!n.some(e=>j(t,e)):l;}else e?((i=(await Promise.all(n.map(async e=>{let t=j(s,e);return await Q(t&&t._f?{[e]:t}:t);}))).every(Boolean))||a.isValid)&&C():i=l=await Q(s);return g.state.next({...!R(e)||m.isValid&&l!==a.isValid?{}:{name:e},...r.resolver||!e?{isValid:l}:{},errors:a.errors}),t.shouldFocus&&!i&&W(s,ea,e?n:u.mount),i;},el=e=>{let t={...n.mount?i:l};return V(e)?t:R(e)?j(t,e):e.map(e=>j(t,e));},ey=(e,t)=>({invalid:!!j((t||a).errors,e),isDirty:!!j((t||a).dirtyFields,e),error:j((t||a).errors,e),isValidating:!!j(a.validatingFields,e),isTouched:!!j((t||a).touchedFields,e)}),eh=(e,t,r)=>{let l=(j(s,e,{_f:{}})._f||{}).ref,i=j(a.errors,e)||{},{ref:n,message:u,type:d,...o}=i;S(a.errors,e,{...o,...t,ref:l}),g.state.next({name:e,errors:a.errors,isValid:!1}),r&&r.shouldFocus&&l&&l.focus&&l.focus();},eF=(e,t={})=>{for(let n of e?T(e):u.mount)u.mount.delete(n),u.array.delete(n),t.keepValue||(en(s,n),en(i,n)),t.keepError||en(a.errors,n),t.keepDirty||en(a.dirtyFields,n),t.keepTouched||en(a.touchedFields,n),t.keepIsValidating||en(a.validatingFields,n),r.shouldUnregister||t.keepDefaultValue||en(l,n);g.values.next({values:{...i}}),g.state.next({...a,...t.keepDirty?{isDirty:X()}:{}}),t.keepIsValid||C();},eS=({disabled:e,name:t,field:r,fields:a,value:s})=>{if(w(e)&&n.mount||e){let l=e?void 0:V(s)?ev(r?r._f:j(a,t)._f):s;S(i,t,l),q(t,l,!1,!1,!0);}},ek=(e,t={})=>{let a=j(s,e),i=w(t.disabled);return S(s,e,{...a||{},_f:{...a&&a._f?a._f:{ref:{name:e}},name:e,mount:!0,...t}}),u.mount.add(e),a?eS({field:a,disabled:t.disabled,name:e,value:t.value}):U(e,!0,t.value),{...i?{disabled:t.disabled}:{},...r.progressive?{required:!!t.required,min:e_(t.min),max:e_(t.max),minLength:e_(t.minLength),maxLength:e_(t.maxLength),pattern:e_(t.pattern)}:{},name:e,onChange:er,onBlur:er,ref:i=>{if(i){ek(e,t),a=j(s,e);let r=V(i.value)&&i.querySelectorAll&&i.querySelectorAll("input,select,textarea")[0]||i,n=ec(r),u=a._f.refs||[];(n?u.find(e=>e===r):r===a._f.ref)||(S(s,e,{_f:{...a._f,...n?{refs:[...u.filter(em),r,...Array.isArray(j(l,e))?[{}]:[]],ref:{type:r.type,name:e}}:{ref:r}}}),U(e,!1,void 0,r));}else(a=j(s,e,{}))._f&&(a._f.mount=!1),(r.shouldUnregister||t.shouldUnregister)&&!(p(u.array,e)&&n.action)&&u.unMount.add(e);}};},eD=()=>r.shouldFocusError&&W(s,ea,u.mount),eN=(e,t)=>async l=>{let n;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let u=_(i);if(g.state.next({isSubmitting:!0}),r.resolver){let{errors:e,values:t}=await $();a.errors=e,u=t;}else await Q(s);if(en(a.errors,"root"),L(a.errors)){g.state.next({errors:{}});try{await e(u,l);}catch(e){n=e;}}else t&&await t({...a.errors},l),eD(),setTimeout(eD);if(g.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:L(a.errors)&&!n,submitCount:a.submitCount+1,errors:a.errors}),n)throw n;},eC=(t,r={})=>{let d=t?_(t):l,o=_(d),f=L(t),c=f?l:o;if(r.keepDefaultValues||(l=d),!r.keepValues){if(r.keepDirtyValues)for(let e of u.mount)j(a.dirtyFields,e)?S(c,e,j(i,e)):et(e,j(c,e));else{if(b&&V(t))for(let e of u.mount){let t=j(s,e);if(t&&t._f){let e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(J(e)){let t=e.closest("form");if(t){t.reset();break;}}}}s={};}i=e.shouldUnregister?r.keepDefaultValues?_(l):{}:_(c),g.array.next({values:{...c}}),g.values.next({values:{...c}});}u={mount:r.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},n.mount=!m.isValid||!!r.keepIsValid||!!r.keepDirtyValues,n.watch=!!e.shouldUnregister,g.state.next({submitCount:r.keepSubmitCount?a.submitCount:0,isDirty:!f&&(r.keepDirty?a.isDirty:!!(r.keepDefaultValues&&!eo(t,l))),isSubmitted:!!r.keepIsSubmitted&&a.isSubmitted,dirtyFields:f?{}:r.keepDirtyValues?r.keepDefaultValues&&i?eg(l,i):a.dirtyFields:r.keepDefaultValues&&t?eg(l,t):r.keepDirty?a.dirtyFields:{},touchedFields:r.keepTouched?a.touchedFields:{},errors:r.keepErrors?a.errors:{},isSubmitSuccessful:!!r.keepIsSubmitSuccessful&&a.isSubmitSuccessful,isSubmitting:!1});},eE=(e,t)=>eC(K(e)?e(i):e,t);return{control:{register:ek,unregister:eF,getFieldState:ey,handleSubmit:eN,setError:eh,_executeSchema:$,_getWatch:Y,_getDirty:X,_updateValid:C,_removeUnmounted:()=>{for(let e of u.unMount){let t=j(s,e);t&&(t._f.refs?t._f.refs.every(e=>!em(e)):!em(t._f.ref))&&eF(e);}u.unMount=new Set;},_updateFieldArray:(e,t=[],r,u,d=!0,o=!0)=>{if(u&&r){if(n.action=!0,o&&Array.isArray(j(s,e))){let t=r(j(s,e),u.argA,u.argB);d&&S(s,e,t);}if(o&&Array.isArray(j(a.errors,e))){let t=r(j(a.errors,e),u.argA,u.argB);d&&S(a.errors,e,t),ew(a.errors,e);}if(m.touchedFields&&o&&Array.isArray(j(a.touchedFields,e))){let t=r(j(a.touchedFields,e),u.argA,u.argB);d&&S(a.touchedFields,e,t);}m.dirtyFields&&(a.dirtyFields=eg(l,i)),g.state.next({name:e,isDirty:X(e,t),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid});}else S(i,e,t);},_updateDisabledField:eS,_getFieldArray:t=>x(j(n.mount?i:l,t,e.shouldUnregister?j(l,t,[]):[])),_reset:eC,_resetDefaultValues:()=>K(r.defaultValues)&&r.defaultValues().then(e=>{eE(e,r.resetOptions),g.state.next({isLoading:!1});}),_updateFormState:e=>{a={...a,...e};},_disableForm:e=>{w(e)&&(g.state.next({disabled:e}),W(s,(t,r)=>{let a=j(s,r);a&&(t.disabled=a._f.disabled||e,Array.isArray(a._f.refs)&&a._f.refs.forEach(t=>{t.disabled=a._f.disabled||e;}));},0,!1));},_subjects:g,_proxyFormState:m,_setErrors:e=>{a.errors=e,g.state.next({errors:a.errors,isValid:!1});},get _fields(){return s;},get _formValues(){return i;},get _state(){return n;},set _state(value){n=value;},get _defaultValues(){return l;},get _names(){return u;},set _names(value){u=value;},get _formState(){return a;},set _formState(value){a=value;},get _options(){return r;},set _options(value){r={...r,...value};}},trigger:es,register:ek,handleSubmit:eN,watch:(e,t)=>K(e)?g.values.subscribe({next:r=>e(Y(void 0,t),r)}):Y(e,t,!0),setValue:et,getValues:el,reset:eE,resetField:(e,t={})=>{j(s,e)&&(V(t.defaultValue)?et(e,_(j(l,e))):(et(e,t.defaultValue),S(l,e,_(t.defaultValue))),t.keepTouched||en(a.touchedFields,e),t.keepDirty||(en(a.dirtyFields,e),a.isDirty=t.defaultValue?X(e,_(j(l,e))):X()),!t.keepError&&(en(a.errors,e),m.isValid&&C()),g.state.next({...a}));},clearErrors:e=>{e&&T(e).forEach(e=>en(a.errors,e)),g.state.next({errors:e?a.errors:{}});},unregister:eF,setError:eh,setFocus:(e,t={})=>{let r=j(s,e),a=r&&r._f;if(a){let e=a.refs?a.refs[0]:a.ref;e.focus&&(e.focus(),t.shouldSelect&&e.select());}},getFieldState:ey};}(e),formState:a});let l=t.current.control;return l._options=e,B({subject:l._subjects.state,next:e=>{U(e,l._proxyFormState,l._updateFormState,!0)&&s({...l._formState});}}),n.default.useEffect(()=>l._disableForm(e.disabled),[l,e.disabled]),n.default.useEffect(()=>{if(l._proxyFormState.isDirty){let e=l._getDirty();e!==a.isDirty&&l._subjects.state.next({isDirty:e});}},[l,a.isDirty]),n.default.useEffect(()=>{e.values&&!eo(e.values,r.current)?(l._reset(e.values,l._options.resetOptions),r.current=e.values,s(e=>({...e}))):l._resetDefaultValues();},[e.values,l]),n.default.useEffect(()=>{e.errors&&l._setErrors(e.errors);},[e.errors,l]),n.default.useEffect(()=>{l._state.mount||(l._updateValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted();}),n.default.useEffect(()=>{e.shouldUnregister&&l._subjects.values.next({values:l._getWatch()});},[e.shouldUnregister,l]),t.current.formState=O(a,l),t.current;}(),[A,F]=eC((0,eE.useShallow)(e=>[e.data,e.add])),N=async e=>{a(!0);try{await F(e);}catch(e){}a(!1);};return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex justify-between mb-4",children:[(0,l.jsx)(d.default,{title:"\u53CB\u94FE"}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{type:"button",className:"btn",onClick:()=>(0,eO.showDialogModal)("my-info-dialog"),children:"\u6211\u7684\u4FE1\u606F"}),(0,l.jsx)("button",{className:"btn btn-primary",color:"primary",type:"button",onClick:()=>(0,eO.showDialogModal)("request-link"),children:"\u7533\u8BF7\u53CB\u94FE"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-3 lg:grid-cols-4",children:[A.map(e=>(0,l.jsx)(eT,{link:e},e.id)),0===A.length&&(0,l.jsx)("span",{className:"text-default-500 text-sm",children:"\u6682\u65E0\u53CB\u94FE"})]}),(0,l.jsxs)("dialog",{id:"my-info-dialog",className:"modal",children:[(0,l.jsxs)("div",{className:"modal-box",children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-5",children:"\u6211\u7684\u4FE1\u606F"}),(0,l.jsx)(eB.default,{isShadow:!1,textKey:"my-info"})]}),(0,l.jsx)("form",{method:"dialog",className:"modal-backdrop",children:(0,l.jsx)("button",{type:"submit",children:"close"})})]}),(0,l.jsx)("dialog",{className:"modal",id:"request-link",children:(0,l.jsxs)("div",{className:"modal-box",children:[(0,l.jsx)("h3",{className:"font-bold text-lg mb-5",children:"\u7533\u8BF7\u53CB\u94FE"}),(0,l.jsxs)("form",{onSubmit:i(N),className:"flex flex-col justify-center gap-4",children:[(0,l.jsx)($,{control:u,render:({field:e,fieldState:{error:t}})=>(0,l.jsxs)("label",{className:"form-control",children:[(0,l.jsx)("input",{...e,className:`input w-full input-bordered ${eU(null==t?void 0:t.message)}`,autoFocus:!0,placeholder:"\u8BF7\u8F93\u5165\u7AD9\u70B9\u540D\u79F0",...s("name",{required:"\u8BF7\u8F93\u5165\u7AD9\u70B9\u540D\u79F0"})}),eL(null==t?void 0:t.message)]}),name:"name"}),(0,l.jsx)($,{control:u,render:({field:e})=>{var t;let r=null===(t=m.url)||void 0===t?void 0:t.message;return(0,l.jsxs)("label",{className:"form-control",children:[(0,l.jsx)("input",{className:`input w-full input-bordered ${eU(r)}`,...e,type:"url",placeholder:"\u8BF7\u8F93\u5165URL",...s("url",{required:"\u8BF7\u8F93\u5165URL"})}),eL(r)]});},name:"url",rules:{required:"\u8BF7\u8F93\u5165\u8BBF\u95EEURL",pattern:{value:/^(ftp|http|https):\/\/[^ "]+$/,message:"\u8BF7\u8F93\u5165\u6709\u6548\u7684URL"}}}),(0,l.jsx)($,{control:u,render:({field:e,fieldState:{error:t}})=>(0,l.jsxs)("label",{className:"form-control",children:[(0,l.jsx)("input",{className:`input w-full input-bordered ${eU(null==t?void 0:t.message)}`,...e,placeholder:"\u8BF7\u8F93\u5165LOGO\u76F4\u94FE",...s("logo",{required:"\u8BF7\u8F93\u5165logo"})}),eL(null==t?void 0:t.message)]}),name:"logo",rules:{required:"\u8BF7\u8F93\u5165\u7AD9\u70B9logo"}}),(0,l.jsx)("textarea",{className:"textarea w-full textarea-bordered",placeholder:"(\u53EF\u9009)\u8F93\u5165\u7F51\u7AD9\u4ECB\u7ECD",...s("intro")}),(0,l.jsx)("div",{className:"form-control",children:(0,l.jsxs)("label",{className:"label cursor-pointer",children:[(0,l.jsx)("span",{className:"label-text",children:"\u63A5\u6536\u5BA1\u6838\u901A\u8FC7\u901A\u77E5"}),(0,l.jsx)("input",{type:"checkbox",className:"toggle",checked:e,onChange:e=>t(e.target.checked)})]})}),e&&(0,l.jsx)($,{shouldUnregister:!e,control:u,render:({field:t,fieldState:{error:r}})=>(0,l.jsxs)("label",{className:"form-control",children:[(0,l.jsx)("input",{className:`input w-full input-bordered ${eU(null==r?void 0:r.message)}`,type:"email",placeholder:"\u8F93\u5165\u63A5\u6536\u901A\u77E5\u90AE\u7BB1",...t,...s("email",{required:e?"\u8BF7\u8F93\u5165\u90AE\u7BB1":void 0})}),eL(null==r?void 0:r.message)]}),name:"email",rules:{required:e}}),(0,l.jsxs)("div",{className:"modal-action",children:[(0,l.jsxs)("button",{disabled:g,type:"submit",className:"btn btn-primary",children:[" ",r?(0,l.jsx)("span",{className:"loading loading-spinner"}):(0,l.jsx)(l.Fragment,{children:"\u63D0\u4EA4\u7533\u8BF7"})]}),(0,l.jsx)("form",{method:"dialog",children:(0,l.jsx)("button",{type:"submit",className:"btn",onClick:()=>v(),children:"\u53D6\u6D88"})})]})]})]})})]});}}}]);
//# sourceMappingURL=src_pages_links_index_tsx-async.js.map